# Настройка PWA для LumberTrack AI

Этот документ описывает настройку Progressive Web App (PWA) для приложения LumberTrack AI.

## Что было добавлено

1. **manifest.json** - манифест PWA с метаданными приложения
2. **sw.js** - Service Worker для офлайн работы и кеширования
3. Обновлен **index.html** с мета-тегами и регистрацией Service Worker
4. Инструменты для генерации иконок

## Генерация иконок

Для полноценной работы PWA необходимы иконки в формате PNG (192x192 и 512x512 пикселей).

### Способ 1: Использование generate-icons.html

1. Откройте файл `public/generate-icons.html` в браузере
2. Нажмите кнопки "Скачать" для каждой иконки
3. Сохраните файлы как `icon-192x192.png` и `icon-512x512.png` в папку `public/`

### Способ 2: Онлайн конвертер

1. Используйте SVG файл `public/icon.svg` как основу
2. Конвертируйте в PNG с помощью онлайн-сервиса:
   - https://cloudconvert.com/svg-to-png
   - https://svgtopng.com/
3. Создайте два размера: 192x192 и 512x512 пикселей
4. Сохраните как `icon-192x192.png` и `icon-512x512.png` в папку `public/`

### Способ 3: Генерация через скрипт (требует canvas)

```bash
npm install canvas
npm run generate-icons
```

Затем сконвертируйте SVG файлы в PNG.

## Проверка PWA

### В Chrome DevTools

1. Откройте DevTools (F12)
2. Перейдите на вкладку "Application"
3. Проверьте разделы:
   - **Manifest** - должен показывать информацию о манифесте
   - **Service Workers** - должен показывать зарегистрированный service worker
   - **Cache Storage** - должен показывать кешированные ресурсы

### Установка PWA

#### На десктопе (Chrome, Edge)

1. Откройте приложение в браузере
2. В адресной строке появится иконка установки
3. Нажмите на иконку или используйте меню браузера: "Установить LumberTrack AI"

#### На мобильных устройствах

**Android (Chrome):**
1. Откройте приложение в Chrome
2. В меню выберите "Добавить на главный экран" или "Установить приложение"

**iOS (Safari):**
1. Откройте приложение в Safari
2. Нажмите кнопку "Поделиться"
3. Выберите "На экран «Домой»"

## Особенности Service Worker

Service Worker настроен на:

- **Кеширование статических ресурсов** при установке
- **Кеширование динамических ресурсов** при первом запросе
- **Сетевая стратегия** для внешних API (Google Sheets, Gemini API, Telegram) - всегда использует сеть
- **Автоматическое обновление** при изменении service worker

## Требования для production

1. Приложение должно быть доступно по HTTPS (или localhost для разработки)
2. Файлы `manifest.json` и `sw.js` должны быть доступны по корневому пути
3. Иконки должны быть в формате PNG и соответствовать указанным размерам

## Отладка

Если PWA не работает:

1. Проверьте консоль браузера на наличие ошибок
2. Убедитесь, что все файлы доступны (manifest.json, sw.js, иконки)
3. Проверьте, что приложение работает по HTTPS (в production)
4. Очистите кеш Service Worker в DevTools > Application > Clear storage

## Обновление Service Worker

При изменении `sw.js`:

1. Обновите версию кеша в `sw.js` (измените `CACHE_NAME`)
2. Перезагрузите страницу
3. Service Worker автоматически обновится

